<<<<<<< HEAD
'use strict';
=======
"use strict";
>>>>>>> a788998ecc8efe6343b9c2979e5b19f7302fa02c

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = generateData;

<<<<<<< HEAD
var _generateStaticPrefixMap = require('./generateStaticPrefixMap');

var _generateStaticPrefixMap2 = _interopRequireDefault(_generateStaticPrefixMap);

var _generateDynamicPrefixMap = require('./generateDynamicPrefixMap');

var _generateDynamicPrefixMap2 = _interopRequireDefault(_generateDynamicPrefixMap);

var _generatePluginList = require('./generatePluginList');
=======
var _generateStaticPrefixMap = require("./generateStaticPrefixMap");

var _generateStaticPrefixMap2 = _interopRequireDefault(_generateStaticPrefixMap);

var _generateDynamicPrefixMap = require("./generateDynamicPrefixMap");

var _generateDynamicPrefixMap2 = _interopRequireDefault(_generateDynamicPrefixMap);

var _generatePluginList = require("./generatePluginList");
>>>>>>> a788998ecc8efe6343b9c2979e5b19f7302fa02c

var _generatePluginList2 = _interopRequireDefault(_generatePluginList);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function generateImportString(plugin, pluginPath, compatibility) {
  if (compatibility) {
<<<<<<< HEAD
    return 'var ' + plugin + ' = require(\'inline-style-prefixer/' + pluginPath + '/plugins/' + plugin + '\')';
  }
  return 'import ' + plugin + ' from \'inline-style-prefixer/' + pluginPath + '/plugins/' + plugin + '\'';
=======
    return "var " + plugin + " = require('inline-style-prefixer/" + pluginPath + "/plugins/" + plugin + "')";
  }
  return "import " + plugin + " from 'inline-style-prefixer/" + pluginPath + "/plugins/" + plugin + "'";
>>>>>>> a788998ecc8efe6343b9c2979e5b19f7302fa02c
}


function generateFile(prefixMap, pluginList, compatibility, pluginPath) {
  var pluginImports = pluginList.map(function (plugin) {
    return generateImportString(plugin, pluginPath, compatibility);
<<<<<<< HEAD
  }).join('\n');

  var moduleExporter = compatibility ? 'module.exports = ' : 'export default';
  var pluginExport = '[' + pluginList.join(',') + ']';
  var prefixMapExport = JSON.stringify(prefixMap);

  if (pluginPath === 'static') {
    var prefixVariables = ['var w = ["Webkit"];', 'var m = ["Moz"];', 'var ms = ["ms"];', 'var wm = ["Webkit","Moz"];', 'var wms = ["Webkit","ms"];', 'var wmms = ["Webkit","Moz","ms"];'].join('\n');

    return pluginImports + '\n' + prefixVariables + '\n\n' + moduleExporter + ' {\n  plugins: ' + pluginExport + ',\n  prefixMap: ' + prefixMapExport.replace(/\["Webkit"\]/g, 'w').replace(/\["Moz"\]/g, 'm').replace(/\["ms"\]/g, 'ms').replace(/\["Webkit","Moz"\]/g, 'wm').replace(/\["Webkit","ms"\]/g, 'wms').replace(/\["Webkit","Moz","ms"\]/g, 'wmms') + '\n}';
  }

  return pluginImports + '\n\n' + moduleExporter + ' {\n  plugins: ' + pluginExport + ',\n  prefixMap: ' + prefixMapExport + '\n}';
=======
  }).join("\n");

  var moduleExporter = compatibility ? "module.exports = " : "export default";
  var pluginExport = "[" + pluginList.join(",") + "]";
  var prefixMapExport = JSON.stringify(prefixMap);

  if (pluginPath === "static") {
    var prefixVariables = ['var w = ["Webkit"];', 'var m = ["Moz"];', 'var ms = ["ms"];', 'var wm = ["Webkit","Moz"];', 'var wms = ["Webkit","ms"];', 'var wmms = ["Webkit","Moz","ms"];'].join("\n");

    return pluginImports + "\n" + prefixVariables + "\n\n" + moduleExporter + " {\n  plugins: " + pluginExport + ",\n  prefixMap: " + prefixMapExport.replace(/\["Webkit"\]/g, "w").replace(/\["Moz"\]/g, "m").replace(/\["ms"\]/g, "ms").replace(/\["Webkit","Moz"\]/g, "wm").replace(/\["Webkit","ms"\]/g, "wms").replace(/\["Webkit","Moz","ms"\]/g, "wmms") + "\n}";
  }

  return pluginImports + "\n\n" + moduleExporter + " {\n  plugins: " + pluginExport + ",\n  prefixMap: " + prefixMapExport + "\n}";
>>>>>>> a788998ecc8efe6343b9c2979e5b19f7302fa02c
}

function saveFile(fileContent, path) {
  /* eslint-disable global-require */
<<<<<<< HEAD
  var fs = require('fs');
=======
  var fs = require("fs");
>>>>>>> a788998ecc8efe6343b9c2979e5b19f7302fa02c
  /* eslint-enable global-require */

  fs.writeFile(path, fileContent, function (err) {
    if (err) {
      throw err;
    }

<<<<<<< HEAD
    console.log('Successfully saved data to "' + path + '".');
=======
    console.log("Successfully saved data to \"" + path + "\".");
>>>>>>> a788998ecc8efe6343b9c2979e5b19f7302fa02c
  });
}

function generateData(browserList) {
  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
      compatibility = _ref.compatibility,
      plugins = _ref.plugins,
      staticPath = _ref.staticPath,
      dynamicPath = _ref.dynamicPath,
      prefixMap = _ref.prefixMap;

  var shouldRenderPlugins = plugins !== undefined ? plugins : true;
  var shouldRenderPrefixMap = prefixMap !== undefined ? prefixMap : true;

  var data = {
    static: shouldRenderPrefixMap ? (0, _generateStaticPrefixMap2.default)(browserList) : {},
    dynamic: shouldRenderPrefixMap ? (0, _generateDynamicPrefixMap2.default)(browserList) : {},
    plugins: shouldRenderPlugins ? (0, _generatePluginList2.default)(browserList) : []
  };

  if (staticPath) {
<<<<<<< HEAD
    var fileContent = generateFile(data.static, data.plugins, compatibility, 'static');
=======
    var fileContent = generateFile(data.static, data.plugins, compatibility, "static");
>>>>>>> a788998ecc8efe6343b9c2979e5b19f7302fa02c

    saveFile(fileContent, staticPath);
  }

  if (dynamicPath) {
<<<<<<< HEAD
    var _fileContent = generateFile(data.dynamic, data.plugins, compatibility, 'dynamic');
=======
    var _fileContent = generateFile(data.dynamic, data.plugins, compatibility, "dynamic");
>>>>>>> a788998ecc8efe6343b9c2979e5b19f7302fa02c

    saveFile(_fileContent, dynamicPath);
  }

  return data;
}
<<<<<<< HEAD
module.exports = exports['default'];
=======
module.exports = exports["default"];
>>>>>>> a788998ecc8efe6343b9c2979e5b19f7302fa02c
